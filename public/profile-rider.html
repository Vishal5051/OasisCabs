<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <style>
    .bg-color {
        background-color: #008080;
        ;
        color: white;
        /* background-color: #97beb1;; */
    }

    #main {
        border: 1px black solid;
        width: 1200px;
    }

    label {
        font-size: .5cm;
        font-weight: 520;
    }

    .custom-bg-color {
        background-color: #008080;
        color: white;
        border: #008080 2px solid;
    }

    .custom-bg-color:hover {
        background-color: #ffffff;
        border: #008080 2px solid;
        color: #008080;

    }
</style>
<script>
    function doPre(refile, preving) {
        const [file] = refile.files
        if (file) {
            preving.src = URL.createObjectURL(file)
        }
    }

    $(document).ready(function () {

        // ======================================btnFetch jsooonnn======================
        $("#btnFetch").click(function () {
            var emailKu = $("#inputEmail4").val();
            var obj = {
                type: "get",
                url: "/get-json-record-rider", // Assuming this route corresponds to fetching data from the customers table
                data: { kuchEmail: emailKu }
            };
        
            $.ajax(obj).done(function (reapJsonKuch) {
                if (reapJsonKuch.length == 1) {
                    $("#inputname").val(reapJsonKuch[0].name);
                    $("#inputcontact").val(reapJsonKuch[0].mobile); // Assuming mobile is the column for contact
                    $("#inputAddress").val(reapJsonKuch[0].address);
                    $("#inpcity").val(reapJsonKuch[0].city);
                    $("#Rid").val(reapJsonKuch[0].proof);
                    $("#imgPre").prop("src", "upload/" + reapJsonKuch[0].file); // Assuming file is the column for photonm
                    $("#hdn").val(reapJsonKuch[0].file); // Assuming file is the column for photonm
        
                    // Data received from the server,
                    $("#btnSave").prop("disabled", true);
                    $("#btnUpdate").prop("disabled", false);
                } else {
                    // No data received from the server,
                    $("#btnSave").prop("disabled", false);
                    $("#btnUpdate").prop("disabled", true);
        
                    // Clear the input fields if no data to display
                    $("#inputcontact").val("");
                    $("#inputname").val("");
                    $("#inputAddress").val("");
                    $("#inpcity").val("");
                    $("#Rid").val("");
                    $("#imgPre").prop("src", "");
                    $("#hdn").val("");
                }
            }).fail(function (err) {
                alert(JSON.stringify(err));
                alert(err);
            });
        });
        
  //==============================local storage data fectch to user email==============================
            // =============================set user email defautl=============================
            function setactiveUser() {
                var au = localStorage.getItem("active");
                
                $("#inputEmail4").val(au).prop("readonly", true);


            }
            setactiveUser();
        });

</script>
</head>
<body  >
     <!--==============================NAVBAR====================================-->
    <nav class=" navbar bg-color ">
        <div class="rows ms-5">

            <div class="col-12 ">
                <h1> <img src="pics/cab/transport.png" width="50" alt="">
                    &ensp;OasisCabs</h1>
            </div>
        </div>

    </nav>
    <!-- ===============================================form================================================= -->
    <div class="row mt-5 mb-0">
        <div class="col-md-8 offset-md-2">
            <center>
                <h1 style=" font-family: Gabriola, Times, serif; font-size: 2cm;">Fill Your Details</h1>
            </center>
        </div>
    </div>





    <!-- ===============================================form================================================= -->


    <center>


        <div class="row col-md-10">
            <div class="col-md-12">
                <form method="post" enctype="multipart/form-data" class="row g-3">
                    <div class="col-md-6">
                        <label for="inputEmail4" class="form-label">Email</label>
                        <input type="email" class="form-control" name="inputEmail4" id="inputEmail4">
                    </div>
                    <!-- <div class="col-md-6">
                                <label for="inputEmail4" class="form-label">Email</label>
                                <input type="email" class="form-control"
                                    name="inputEmail4" id="inputEmail4">
                            </div> -->

                    <div class="col-md-2 mt-5 ">
                        <button type="button" class="btn btn-outline custom-bg-color  " id="btnSearch">Search</button>
                    </div>
                    <div class="col-md-5">
                        <label for="inputname" class="form-label">Name</label>
                        <input type="text" id="inputname" class="form-control" name="inputname">
                    </div>
                    <!-- <div class="col-md-5">
                                <label for="inputname" class="form-label">Name</label>
                                <input type="text" id="inputname"
                                    class="form-control" name="inputname">
                            </div> -->
                    <div class="col-md-4">
                        <label for="inputcontact" class="form-label ">Contact
                            Number</label>
                        <input type="number" id="inputcontact" class="form-control" name="inputcontact">
                    </div>
                    <div class="row">
                        <div class="col-9">
                            <label for="inputAddress" class="form-label">Address</label>
                            <input type="text" id="inputAddress" class="form-control" name="inputAddress"
                                placeholder="1234 Main St">
                        </div>

                        <div class="col-2">
                            <label for="inpcity" class="form-label">Home City</label>

                            <input type="text" id="inpcity" class="form-control " placeholder="City Name........"
                                name="inpcity">

                        </div>

                        

                        <div class="col-md-3">
                            <label for="inputID" class="form-label">ID
                                Proof</label>
                                <select class="form-select" id="Rid" name="Rid">
                                    <option selected>Select</option>
                                    <option value="Aadhar">Aadhar</option>
                                    <option value="Passport">Passport</option>
                                    <option value="PAN">PAN Card</option>
                                </select>
                           

                        </div>
                        <div class="col-md-4 my-4 p-2  ">

                            <input type="file" name="photo" class="float-start " onchange="doPre(this,imgPre)"
                                accept="image/*">
                            <img src id="imgPre" name="imgPre" class="float-end" width="100px" height="100px " alt=" ">
                            <!-- ==================for pic save while update================== -->
                            <input type="hidden" name="hdn" id="hdn">

                        </div>

                        <div class="col-12 ">
                            <button type="submit" class="btn btn-outline custom-bg-color"
                                formaction="/passanger-profile-save-data">Save</button>

                            <button type="submit" class="btn btn-outline custom-bg-color"
                                formaction="/Profile-update-data-passanger-id">Update
                                Account</button>

                        </div>

                    </div>
                </form>
            </div>
    </center>
    <!-- ===============================================form================================================= -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
</body>
</html>